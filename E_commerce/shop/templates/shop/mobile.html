{% extends 'shop/base.html' %}
{% load static %}

{% block content %}
<div class="electronics-page" style="padding: 20px;">
    <h1 style="text-align: center; margin-bottom: 30px; color: #333; border-bottom: 2px solid #f06596b1; padding-bottom: 10px;">
        Electronics & Appliances
    </h1>

    <!-- Category Filter Section -->
    <div class="category-filter" style="margin-bottom: 30px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
        <h3 style="margin-bottom: 15px; color: #f06596b1;">Filter by Category</h3>
        <div class="filter-buttons" style="display: flex; flex-wrap: wrap; gap: 10px;">
            <a href="?category=mobile" class="filter-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.category == 'mobile' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.category == 'mobile' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">Mobiles</a>
            
            <a href="?category=watch" class="filter-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.category == 'watch' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.category == 'watch' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">Watches</a>
            
            <a href="?category=fridge" class="filter-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.category == 'fridge' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.category == 'fridge' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">Refrigerators</a>
            
            <a href="?category=fan" class="filter-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.category == 'fan' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.category == 'fan' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">Fans</a>
            
            <a href="?category=tv" class="filter-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.category == 'tv' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.category == 'tv' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">Televisions</a>
            
            <a href="?category=ac" class="filter-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.category == 'ac' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.category == 'ac' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">ACs</a>
            
            <a href="?category=all" class="filter-btn" style="
                padding: 8px 15px;
                background: {% if not request.GET.category %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if not request.GET.category %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">All Electronics</a>
        </div>
    </div>

    <!-- Price Filter Section -->
    <div class="price-filter" style="margin-bottom: 30px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
        <h3 style="margin-bottom: 15px; color: #f06596b1;">Filter by Price</h3>
        <div class="price-buttons" style="display: flex; flex-wrap: wrap; gap: 10px;">
            <a href="?price=under5000" class="price-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.price == 'under5000' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.price == 'under5000' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">Under ₹5000</a>
            
            <a href="?price=5000-10000" class="price-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.price == '5000-10000' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.price == '5000-10000' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">₹5000 - ₹10000</a>
            
            <a href="?price=10000-20000" class="price-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.price == '10000-20000' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.price == '10000-20000' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">₹10000 - ₹20000</a>
            
            <a href="?price=above20000" class="price-btn" style="
                padding: 8px 15px;
                background: {% if request.GET.price == 'above20000' %}#f06596b1{% else %}#e9ea9dec{% endif %};
                color: {% if request.GET.price == 'above20000' %}white{% else %}black{% endif %};
                border-radius: 20px;
                text-decoration: none;
                font-weight: bold;
            ">Above ₹20000</a>
        </div>
    </div>

    <!-- Products Grid -->
    <div class="product-grid" style="
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
    ">
        {% for product in electronics_products %}
        <div class="product-card" style="
            background: linear-gradient(to top, rgba(149, 239, 194, 0.56), rgba(249, 157, 206, 0.9));
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        ">
            <a href="{% url 'product_detail' product.id %}" style="text-decoration: none;">
                <img src="{{ product.image.url }}" alt="{{ product.name }}" style="
                    width: 100%;
                    height: 180px;
                    object-fit: contain;
                    background: #f8f8f8;
                    border-radius: 8px;
                    display: block;
                    margin: 0 auto 15px;
                ">
            </a>
            <div class="product-info">
                <a href="{% url 'product_detail' product.id %}" style="text-decoration: none; color: inherit;">
                    <h3 style="margin: 0 0 5px; font-size: 16px;">{{ product.name }}</h3>
                </a>
                <p style="margin: 0 0 10px; font-weight: bold; color: #333;">₹{{ product.price }}</p>
                
                {% if product.reviews.all %}
                <div style="margin-bottom: 10px;">
                    {% with avg_rating=product.avg_rating %}
                        {% for i in "12345" %}
                            {% if forloop.counter <= avg_rating %}
                                ★
                            {% else %}
                                ☆
                            {% endif %}
                        {% endfor %}
                        ({{ product.reviews.count }})
                    {% endwith %}
                </div>
                {% endif %}
                
                <div style="display: flex; gap: 10px;">
                    <a href="{% url 'product_detail' product.id %}" style="
                        padding: 5px 10px;
                        background: white;
                        color: #f06596b1;
                        border: 1px solid #f06596b1;
                        border-radius: 4px;
                        text-decoration: none;
                        font-size: 14px;
                    ">View</a>
                    <form action="{% url 'add_to_cart' product.id %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" style="
                            padding: 5px 10px;
                            background: #f06596b1;
                            color: white;
                            border: none;
                            border-radius: 4px;
                            cursor: pointer;
                            font-size: 14px;
                        ">Add to Cart</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- No Products Message -->
    {% if not electronics_products %}
    <div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 8px;">
        <p style="font-size: 18px; color: #666;">No products found matching your filters.</p>
        <a href="?category=all" style="
            display: inline-block;
            margin-top: 15px;
            padding: 8px 20px;
            background: #f06596b1;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
        ">Show All Electronics</a>
    </div>
    {% endif %}
</div>
{% endblock %}