{% extends 'shop/base.html' %}
{% load static %}
{% block content %}
<div class="home_top">
    <h2>Welcome to Our Store</h2>
    {% if user.is_authenticated %}
        <span class="hello">Hi, {{ user.username }}</span>
    {% endif %}
</div>
<main style="padding: 0.7rem; flex: 1;">
    <!-- Your page content would go here -->
    <div class="carousel-container">
        <div class="carousel" id="imageCarousel">
            <div class="carousel-item">
                <img src="static/image/A1.jpg" alt="Promotion 1">
            </div>
            <div class="carousel-item">
                <img src="static/image/A3.jpg" alt="Promotion 2">
            </div>
            <div class="carousel-item">
                <img src="static/image/A1.jpg" alt="Promotion 3">
            </div>
            <div class="carousel-item">
                <img src="static/image/A3.jpg" alt="Promotion 4">
            </div>
            <div class="carousel-item">
                <img src="static/image/baneer1.png" alt="Promotion 5">
            </div>
        </div>
        <div class="carousel-nav" id="carouselNav">
            <!-- Dots will be added dynamically -->
        </div>
    </div>
</main>


<!-- ===== All Products Section ===== -->
<section id="all-products" style="
    padding: 10px 0;
    background: white;
    margin: 20px 10px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    background-color: #adccea89;  
">
    <div style="max-width: 1200px; margin: 10px auto; padding:  1px;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="
                font-size: 28px;
                color: #333;
                margin-bottom: 30px;
                border-bottom: 2px solid #f06596b1;
                padding-bottom: 10px;
                display: block;
            ">
                All Products
            </h2>
            <a href="{% url 'product_list' %}" style="
                background: #f06596b1;
                color: white;
                padding: 8px 16px;
                border-radius: 4px;
                text-decoration: none;
                font-weight: bold;
                margin-bottom: 30px;
            ">
                View All Products
            </a>
        </div>
        
        <!-- Product items would go here -->
        <div class="product-grid">
            {% for product in products|slice:":12" %}
            <div class="product-card" style="background:linear-gradient(to top, rgba(149, 239, 194, 0.56),rgba(249, 157, 206, 0.9));">
                <a href="{% url 'product_detail' product.id %}" style="text-decoration: none;">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image" style="width:180px; height:180px; object-fit:contain; background:#f8f8f8; border-radius:8px; display:block; margin:auto;">
                </a>
                <div class="product-info">
                    <a href="{% url 'product_detail' product.id %}" style="text-decoration: none; color: inherit;">
                        <h3 class="product-title">{{ product.name }}</h3>
                    </a>
                    <p class="product-price">₹{{ product.price }}</p>
                    
                    {% if product.reviews.all %}
                        <div class="rating">
                            {% with avg_rating=product.avg_rating %}
                                {% for i in "12345" %}
                                    {% if forloop.counter <= avg_rating %}
                                        ★
                                    {% else %}
                                        ☆
                                    {% endif %}
                                {% endfor %}
                                ({{ product.reviews.count }})
                            {% endwith %}
                        </div>
                    {% endif %}
                    
                    <div class="product-actions">
                        <a href="{% url 'product_detail' product.id %}" class="btn btn-outline">View</a>
                        <form action="{% url 'add_to_cart' product.id %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary">Add to Cart</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if products.paginator.num_pages > 1 %}
        <div class="pagination" style="
            display: flex;
            justify-content: center;
            margin-top: 30px;
            padding: 20px 0;
        ">
            {% if products.has_previous %}
                <a href="?page=1" style="
                    padding: 8px 16px;
                    margin: 0 4px;
                    border: 1px solid #ddd;
                    text-decoration: none;
                    color: #333;
                    border-radius: 4px;
                ">&laquo; First</a>
                <a href="?page={{ products.previous_page_number }}" style="
                    padding: 8px 16px;
                    margin: 0 4px;
                    border: 1px solid #ddd;
                    text-decoration: none;
                    color: #333;
                    border-radius: 4px;
                ">Previous</a>
            {% endif %}
            
            {% for num in products.paginator.page_range %}
                {% if products.number == num %}
                    <span style="
                        padding: 8px 16px;
                        margin: 0 4px;
                        border: 1px solid #f06596b1;
                        background-color: #f06596b1;
                        color: white;
                        border-radius: 4px;
                    ">{{ num }}</span>
                {% elif num > products.number|add:'-3' and num < products.number|add:'3' %}
                    <a href="?page={{ num }}" style="
                        padding: 8px 16px;
                        margin: 0 4px;
                        border: 1px solid #ddd;
                        text-decoration: none;
                        color: #333;
                        border-radius: 4px;
                    ">{{ num }}</a>
                {% endif %}
            {% endfor %}
            
            {% if products.has_next %}
                <a href="?page={{ products.next_page_number }}" style="
                    padding: 8px 16px;
                    margin: 0 4px;
                    border: 1px solid #ddd;
                    text-decoration: none;
                    color: #333;
                    border-radius: 4px;
                ">Next</a>
                <a href="?page={{ products.paginator.num_pages }}" style="
                    padding: 8px 16px;
                    margin: 0 4px;
                    border: 1px solid #ddd;
                    text-decoration: none;
                    color: #333;
                    border-radius: 4px;
                ">Last &raquo;</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>

<!-- ===== New Arrivals Section ===== -->
<section id="new-arrivals" style="
    padding: 40px 0;
    background: #e9ea9dec;
    margin: 20px 10px;
    border-radius: 8px;
">
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
        <h2 style="
            font-size: 28px;
            color: #333;
            margin-bottom: 30px;
            border-bottom: 2px solid #f06596b1;
            padding-bottom: 10px;
            display:block;
        ">
            New Arrivals
        </h2>
        
        <!-- New arrivals content here -->
    </div>
</section>


<!-- ===== About Us Section ===== -->
<section id="about-us" style="
    padding: 40px 0;
    background: #f8f9fa;
    margin: 20px 10px;
    border-radius: 8px;
">
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
        <h2 style="
            font-size: 28px;
            color: #333;
            margin-bottom: 30px;
            border-bottom: 2px solid #f06596b1;
            padding-bottom: 10px;
            display:block;
        ">
            About Us
        </h2>
        <div style="display: flex; flex-wrap: wrap; gap: 20px;">
            <div style="flex: 1; min-width: 300px;">
                <h3 style="color: #f06596b1;">Our Story</h3>
                <p>BUY NOW was founded in 2025 with a simple mission: to provide high-quality products at affordable prices with exceptional customer service.</p>
            </div>
            <div style="flex: 1; min-width: 300px;">
                <h3 style="color: #f06596b1;">Our Values</h3>
                <p>We believe in quality, affordability, and sustainability. Every product in our store is carefully selected to meet our high standards.</p>
            </div>
            <div style="flex: 1; min-width: 300px;">
                <h3 style="color: #f06596b1;">Our Team</h3>
                <p>Our dedicated team works around the clock to ensure you have the best shopping experience possible.</p>
            </div>
        </div>
    </div>
</section>

{% endblock %}

